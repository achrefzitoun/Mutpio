<div class="background">


  <br><br>
  <br><br>
  <br><br>

  <p-card>
    <div class="card">
      <p-toast></p-toast>
      <p-steps [model]="items" [readonly]="false" [activeIndex]="activeIndex"
        (activeIndexChange)="onActiveIndexChange($event)"></p-steps>
    </div>
  </p-card>
  <br><br>

  <p-fieldset>
    <ng-template pTemplate="header">
      <div class="flex align-items-center text-primary">
        <span class="pi pi-user mr-2" style="color: #DC0029;"></span>
        <label>Votre identité</label>
      </div>
    </ng-template>
    <div class="col-12">
      <div class="p-fluid p-formgrid grid">
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Nom</label>
          <input pInputText id="firstname2" type="text" disabled severity="danger" />
          <label></label>
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Prénom</label>
          <input pInputText id="lastname2" type="text" disabled />
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Date de naissance</label>
          <p-calendar [showIcon]="true" inputId="icon" dateFormat="dd.mm.yy" [disabled]="true"></p-calendar>
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Situation familaile</label>
          <p-dropdown [options]="situations" [(ngModel)]="selectedSituation" optionLabel="name" [showClear]="true"
            placeholder="Situation"></p-dropdown>
        </div>
        <div class="field col-12 md:col-2">
        </div>
        <div class="field col-12 md:col-6">
          <label class="font-bold block mb-2">Votre adresse postale </label>
          <input pInputTextarea id="address" rows="4" placeholder="Adresse postale" />
        </div>
        <div class="field col-12 md:col-1">
          <label class="font-bold block mb-2">Civilité </label>
          <p-toggleButton [(ngModel)]="civil" onLabel="Mme" offLabel="M" severity="danger"></p-toggleButton>
        </div>
        <div class="field col-12 md:col-1" *ngIf="civil">
        </div>
        <div class="field col-12 md:col-3" *ngIf="civil">
          <label class="font-bold block mb-2">Nom du jeune fille </label>
          <input pInputText id="firstname2" type="text" placeholder="Nom du jeune fille" />
        </div>
        <div class="field col-12 md:col-1" *ngIf="civil">
        </div>
        <div class="field col-12 md:col-5" *ngIf="!civil">
        </div>
        <div class="field col-12 md:col-3">
          <label class="font-bold block mb-2">Code postal</label>
          <input pInputText id="city" type="text" placeholder="Code postal" />
        </div>
        <div class="field col-12 md:col-3">
          <label class="font-bold block mb-2">Ville</label>
          <p-dropdown optionLabel="name" placeholder="Ville"></p-dropdown>
        </div>
        <div class="field col-12 md:col-6">
          <label class="font-bold block mb-2">Téléphone</label>
          <div class="p-inputgroup">
            <span class="p-inputgroup-addon">
              <i class="pi pi-phone"></i>
            </span>
            <span class="p-inputgroup-addon">
              +33
            </span>
            <input pInputText pKeyFilter="num" maxlength="8" placeholder="Numéro du téléphone" />
          </div>
        </div>
        <div class="field col-12 md:col-6">
          <label class="font-bold block mb-2">Email</label>
          <div class="p-inputgroup">
            <span class="p-inputgroup-addon">
              <i class="pi pi-inbox"></i>
            </span>
            <input pInputText placeholder="Adresse email" />
          </div>
        </div>
        <div class="field col-12 md:col-1">
          <label class="font-bold block mb-2">Frontalier</label>
        </div>
        <div class="field col-12 md:col-1">
          <p-inputSwitch></p-inputSwitch>
        </div>
        <div class="field col-12 md:col-1">
        </div>
        <div class="field col-12 md:col-1">
          <label class="font-bold block mb-2">Êtes-vous parrainé ?</label>
        </div>
        <div class="field col-12 md:col-1">
          <p-inputSwitch></p-inputSwitch>
        </div>
        <div class="field col-12 md:col-7">
        </div>
        
        <div class="field col-12">
          <label class="font-bold block mb-2">Votre régime</label>
          <div class="field col-12 md:flex">
            <div class="field col-12 md:flex">
              <div class="md:flex-1 mb-2 md:mb-0 md:mr-2">
                <p-button label="Régime générale" icon="pi pi-shield"
                  [outlined]="isOutlined('GENERALE', beneficiare.regime)" severity="danger">
                </p-button>
              </div>
              <div class="md:flex-1 mb-2 md:mb-0 md:mr-2">
                <p-button label="TNS" [outlined]="isOutlined('TNS', beneficiare.regime)" icon="pi pi-shield"
                  severity="danger">
                </p-button>
              </div>
              <div class="md:flex-1">
                <p-button label="Régime local" [outlined]="isOutlined('ALSACE_MOSELLE', beneficiare.regime)"
                  icon="pi pi-shield" severity="danger">
                </p-button>
              </div>
            </div>
          </div>
        </div>
        <div class="field col-12 md:col-4" *ngIf="beneficiare.regime == 'TNS'">
          <label class="font-bold block mb-2">Date clôture comptable</label>
          <input pInputText id="NSS" type="text" severity="danger" placeholder="Numéro Sécurité Sociale" />
        </div>
        <div class="field col-12 md:col-8">
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">N° SS</label>
          <input pInputText id="NSS" type="text" severity="danger" placeholder="Numéro Sécurité Sociale" />
        </div>
        <div class="field col-12 md:col-2">
          <label class="font-bold block mb-2">Clé SS</label>
          <input pInputText id="CSS" type="text" severity="danger" placeholder="Clé Sécurité Sociale" />
        </div>
        <div class="field col-12 md:col-1">
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Attestation de droits à l'assurance maladie</label>
          <p-toast></p-toast>
          <p-fileUpload mode="basic" chooseLabel="Choisir" name="demo[]"
            url="https://www.primefaces.org/cdn/api/upload.php" accept="image/*"></p-fileUpload>
        </div>
        <div class="field col-12 md:col-7">
        </div>
        <div class="field col-12 md:col-5">
          <label class="font-bold block mb-2">Relevè d'identité bancaire</label>
          <p-toast></p-toast>
          <p-fileUpload mode="basic" chooseLabel="Choisir" name="demo[]"
            url="https://www.primefaces.org/cdn/api/upload.php" accept="image/*"></p-fileUpload>
        </div>
        <div class="field col-12 md:col-7">
        </div>
        <div class="field col-12 md:col-5">
          <label class="font-bold block mb-2">Pièce d'identité Recto-Verso</label>
          <p-toast></p-toast>
          <p-fileUpload mode="basic" chooseLabel="Choisir" name="demo[]"
            url="https://www.primefaces.org/cdn/api/upload.php" accept="image/*"></p-fileUpload>
        </div>
      </div>
    </div>
  </p-fieldset>

  <br><br>

  <p-fieldset>
    <ng-template pTemplate="header">
      <div class="flex align-items-center text-primary">
        <label>Conjoint</label>
      </div>
    </ng-template>
    <div class="col-12">
      <div class="p-fluid p-formgrid grid">
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Nom</label>
          <input pInputText id="firstname2" type="text" [(ngModel)]="conjoint.nom" />
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Prenom</label>
          <input pInputText id="lastname2" type="text" [(ngModel)]="conjoint.prenom" />
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Date de naissance</label>
          <p-calendar [showIcon]="true" inputId="icon" dateFormat="dd.mm.yy" [disabled]="true"
            [(ngModel)]="conjoint.dateNaissance"></p-calendar>
        </div>
        <div class="field col-12">
          <label class="font-bold block mb-2">Votre régime</label>
          <div class="field col-12 md:flex">
            <div class="md:flex-1 mb-2 md:mb-0 md:mr-2">
              <p-button label="Régime générale" icon="pi pi-shield" [outlined]="isOutlined('GENERALE', conjoint.regime)"
                severity="danger">
              </p-button>
            </div>
            <div class="md:flex-1 mb-2 md:mb-0 md:mr-2">
              <p-button label="TNS" [outlined]="isOutlined('TNS', conjoint.regime)" icon="pi pi-shield"
                severity="danger">
              </p-button>
            </div>
            <div class="md:flex-1">
              <p-button label="Régime local" [outlined]="isOutlined('ALSACE_MOSELLE', conjoint.regime)"
                icon="pi pi-shield" severity="danger">
              </p-button>
            </div>
          </div>
        </div>
        <div class="field col-12 md:col-4" *ngIf="conjoint.regime == 'TNS'">
          <label class="font-bold block mb-2">Date clôture comptable</label>
          <input pInputText id="NSS" type="text" severity="danger" placeholder="Numéro Sécurité Sociale" />
        </div>
        <div class="field col-12 md:col-12">
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">N° SS</label>
          <input pInputText id="NSS" type="text" severity="danger" placeholder="Numéro Sécurité Sociale" />
        </div>
        <div class="field col-12 md:col-2">
          <label class="font-bold block mb-2">Clé SS</label>
          <input pInputText id="CSS" type="text" severity="danger" placeholder="Clé Sécurité Sociale" />
        </div>
        <div class="field col-12 md:col-1">
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Attestation de droits à l'assurance maladie</label>
          <p-toast></p-toast>
          <p-fileUpload mode="basic" chooseLabel="Choisir" name="demo[]" [showUploadButton]="false"
            url="https://www.primefaces.org/cdn/api/upload.php" accept="image/*"></p-fileUpload>
        </div>
      </div>
    </div>
  </p-fieldset>

  <br><br>

  <p-fieldset>
    <ng-template pTemplate="header">
      <div class="flex align-items-center text-primary">
        <label>Enfants</label>
      </div>
    </ng-template>
    <div class="col-12" *ngFor="let e of enfants; let index = index">
      <br>
      <label class="bold-and-centered"> Enfant {{index+1}} :</label>
      <br><br><br>
      <div class="p-fluid p-formgrid grid">
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Nom</label>
          <input pInputText id="firstname2" type="text" [(ngModel)]="e.nom" />
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Prenom</label>
          <input pInputText id="lastname2" type="text" [(ngModel)]="e.prenom" />
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Date de naissance</label>
          <p-calendar [showIcon]="true" inputId="icon" dateFormat="dd.mm.yy" [disabled]="true"
            [(ngModel)]="e.dateNaissance"></p-calendar>
        </div>
        <div class="field col-12">
          <label class="font-bold block mb-2">Votre régime</label>
          <div class="field col-12 md:flex">
            <div class="md:flex-1 mb-2 md:mb-0 md:mr-2">
              <p-button label="Régime générale" icon="pi pi-shield" [outlined]="isOutlined('GENERALE', e.regime)"
                severity="danger">
              </p-button>
            </div>
            <div class="md:flex-1 mb-2 md:mb-0 md:mr-2">
              <p-button label="TNS" [outlined]="isOutlined('TNS', e.regime)" icon="pi pi-shield" severity="danger">
              </p-button>
            </div>
            <div class="md:flex-1">
              <p-button label="Régime local" [outlined]="isOutlined('ALSACE_MOSELLE', e.regime)" icon="pi pi-shield"
                severity="danger">
              </p-button>
            </div>
          </div>
        </div>
        <div class="field col-12 md:col-4" *ngIf="e.regime == 'TNS'">
          <label class="font-bold block mb-2">Date clôture comptable</label>
          <p-calendar [showIcon]="true" inputId="icon" dateFormat="dd.mm.yy"></p-calendar>
        </div>
        <div class="field col-12 md:col-12">
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">N° SS</label>
          <input pInputText id="NSS" type="text" severity="danger" placeholder="Numéro Sécurité Sociale" />
        </div>
        <div class="field col-12 md:col-2">
          <label class="font-bold block mb-2">Clé SS</label>
          <input pInputText id="CSS" type="text" severity="danger" placeholder="Clé Sécurité Sociale" />
        </div>
        <div class="field col-12 md:col-1">
        </div>
        <div class="field col-12 md:col-4">
          <label class="font-bold block mb-2">Attestation de droits à l'assurance maladie</label>
          <p-toast></p-toast>
          <p-fileUpload mode="basic" chooseLabel="Choose" name="demo[]"
            url="https://www.primefaces.org/cdn/api/upload.php" accept="image/*"></p-fileUpload>
        </div>
      </div>
      <br>
      <hr *ngIf="enfants[index + 1] != null" style="border-color: #f5f5f5; height: 0.2px;">
    </div>
  </p-fieldset>
  <br><br>
  <p-card>
    <div class="col-12">

      <div class="p-fluid p-formgrid grid">
        <div class="field col-12 md:col-2">
        </div>
        <div class="field col-12 md:col-6">
        </div>
        <div class="field col-12 md:col-2">
          <p-button icon="pi pi-chevron-left" label="Retour" severity="secondary"></p-button>

        </div>
        <div class="field col-12 md:col-2">
          <p-button label="Suivant" [loading]="loading" (onClick)="load()" severity="danger"></p-button>
        </div>
      </div>
    </div>
  </p-card>
  <br><br>

</div>